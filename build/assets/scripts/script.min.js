"use strict";var mapStyles=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#011629"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{hue:"#00ffe6"},{saturation:-20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#c7d9e7"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#a6cbe9"},{visibility:"on"}]}],mapBaloon="./../assets/images/marker.png",mapBaloonLitle="./../assets/images/map-baloon-litle.png",coordinates={lat:51.823928,lng:107.58169},coordinates2={lat:51.842483,lng:107.647887},addresses=[{address:"Россия, г. Улан-удэ, ул. Ключевская 54Б",name:"Брахма-Центр"},{address:"Россия, г. Улан-удэ, ул. Тобольская 77 А блок Г",name:"А блок Г",ballon:mapBaloonLitle},{address:"Россия, г. Улан-удэ, ул. Трубачеева, 140А",name:"3",ballon:mapBaloonLitle},{address:"Россия, г. Улан-удэ, проспект Автомобилистов, 8Б",name:"",ballon:mapBaloonLitle},{address:"Россия, г. Улан-удэ, ул. Грушевая улица, 13",name:"Брахма-Центр",ballon:mapBaloonLitle},{address:"Россия, г. Улан-удэ, ул. 11-й проезд, 270",name:"Брахма-Центр",ballon:mapBaloonLitle},{address:"Россия, г. Улан-удэ, Ботаническая улица, 35В к2",name:"Крокус",ballon:mapBaloonLitle},{address:"Россия, г. Улан-удэ, Трактовая улица, 26",name:"дом"},{address:"Россия, г. Улан-удэ, улица Революции 1905 года, 42",name:"Аргет",ballon:mapBaloonLitle},{address:"Россия, г. Улан-удэ, Джидинская улица, 4",name:"ч/с",ballon:mapBaloonLitle},{position:{lat:51.822742,lng:107.577927},name:"Что то портовое",ballon:mapBaloonLitle}];window.onload=function(){var a=$('[data-type="background-paralax"]');function e(e,a,t,n){function s(e){e.marker=new google.maps.Marker({position:e.position,map:i,title:e.name,icon:e.ballon||mapBaloon})}var i=new google.maps.Map(document.getElementById(e),{center:a,zoom:t,disableDefaultUI:!0,styles:mapStyles}),o=new google.maps.Geocoder;n.forEach(function(a){a.position?s(a):function(e){return new Promise(function(t,n){o.geocode({address:e},function(e,a){"OK"===a?t({lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()}):n("Geocode was not successful for the following reason: "+a)})})}(a.address).then(function(e){a.position=e,s(a)})})}$(window).scroll(function(){if($(window).scrollTop()<=800){var e=65-$(window).scrollTop()/150;a.css({top:e+"%"})}}),$(".js-contacts-map-open").on("click",function(){$(".js-contacts-map-wrapper").addClass("is-open")}),$(".js-contacts-map-close").on("click",function(){$(".js-contacts-map-wrapper").removeClass("is-open")}),$('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function(e){$("html,body").stop().animate({scrollTop:$($(this).attr("href")).offset().top},1e3),e.preventDefault()}),$("button.js-scroll-trigger").click(function(e){$("html,body").stop().animate({scrollTop:$($(this).data("href")).offset().top},1e3),e.preventDefault()}),e("map2",coordinates2,13,addresses),e("map",coordinates,18,[{position:coordinates,name:"Антарктида"}])},function(p){p.fn.setDropdown=function(){var t,e=p(this),n=(p(this).find(".header__dmenu"),p(this).find(".header__dropdown-menu_back .back")),s=p(this).find(".header__dropdown-topmenu"),i=p(this).find(".header__dropdown-footer"),o=p(e).find(".header__dmenu-item"),r=p(e).find(".header__dcontent");function a(){p(window).innerWidth()<=900?(p(o).removeClass("active"),p(r).removeClass("active"),p(s).find("ul li a").on("click",function(){p(".header").removeClass("is-open"),p(".js_dropdown").fadeOut(250)})):(p(o).eq(0).addClass("active"),p(r).eq(0).addClass("active"),p(s).find("ul li a").unbind("click"))}p(o).toArray().forEach(function(e,a){p(e).on("click",function(){900<p(window).innerWidth()?(p(o).removeClass("active"),p(this).addClass("active"),p(r).removeClass("active"),p(r).eq(a).addClass("active")):(t=a,p(o).hide().eq(a).show(),p(s).hide(),p(i).hide(),p(n).addClass("active"),p(r).eq(t).show())})}),p(n).on("click",function(){p(o).show(),p(s).show(),p(i).show(),p(this).removeClass("active"),p(r).eq(t).hide()}),a(),p(window).on("resize",a)},p.fn.showHeader=function(){if(p(window).innerWidth()<1024)return!1;84<=window.pageYOffset?(p(".header").addClass("header--fixed"),p("body").addClass("is-scroled")):(p(".header").removeClass("header--fixed"),p("body").removeClass("is-scroled"))},p.fn.popupFunc=function(){var s=this,t=p(this).find(".popup__tabs-item");p(t).toArray().forEach(function(e,a){p(e).on("click",function(){p(t).toggleClass("active"),0===a?p(s).find(".popup__footer").show():p(s).find(".popup__footer").hide()})});var i=p(this).find("input[name=user-name]"),o=p(this).find(".popup__input-error[data-type=user-name]");p(i).on("focus",function(){p(o).hasClass("active")&&p(o).removeClass("active")});var r=p(this).find("input[name=user-email]"),l=p(this).find(".popup__input-error[data-type=user-email]");p(r).on("focus",function(){p(l).hasClass("active")&&p(l).removeClass("active")});var e=p(this).find("form");p(e).on("submit",function(e){e.preventDefault();var a=0,t=p(i).val();t.length<3&&(p(o).addClass("active"),a++);var n=p(r).val();if(p().validEmail(n)||(p(l).addClass("active"),a++),0!=a)return!1;console.log(t,n),localStorage.setItem("authUser",JSON.stringify({name:t,email:n})),p().changeAuth(),p(s).fadeOut(500)});var a=p(this).find('[data-popup="close"]');p(a).on("click",function(e){e.preventDefault(),p(s).fadeOut(500)})},p.fn.validEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},p.fn.toggleMap=function(){var e=this,a=p(this).find(".js-open-map"),t=localStorage.getItem("mapIsOpen")||"false";p(this).hasClass("active")||"true"!=t||(p(this).addClass("active"),p(a).find("span").text("Скрыть карту")),a.on("click",function(){p(e).hasClass("active")?(p(e).removeClass("active"),p(a).find("span").text("Карта"),localStorage.removeItem("mapIsOpen")):(p(e).addClass("active"),p(a).find("span").text("Скрыть карту"),localStorage.setItem("mapIsOpen","true"))})},p.fn.setHeights=function(){var s=this.find(".cart");s.css("height","auto");var i=Math.floor(this.width()/s.width());if(null!==i||2<=i)for(var e=function(e,a){var t=0,n=s.slice(e,e+i);n.each(function(){var e=parseInt(p(this).outerHeight());t<e&&(t=e)}),n.css("height",t)},a=0,t=s.length;a<t;a+=i)e(a)},p.fn.changeAuth=function(){var e=localStorage.getItem("authUser");if(p(".header__user").removeClass("active"),null!=e){var a=JSON.parse(e),t=a.name;a.email;p(".header__user-logo").text(t[0].toUpperCase()),p(".header__user-name span").text(t),p(".header__user").eq(0).addClass("active")}else p(".header__user").eq(1).addClass("active");return this},p.fn.exitAuth=function(){return p(this).on("click",function(e){e.preventDefault(),localStorage.removeItem("authUser"),p(".header__user-logo").text(""),p(".header__user-name span").text(""),p(".header__user").toggleClass("active"),p(".header").hasClass("is-open")&&(p(".header").removeClass("is-open"),p(".js_dropdown").fadeOut(250)),window.location.replace("/")}),this},p.fn.mytabs=function(){for(var e=p(this),a=p(e).find('[data-tabs="links"]').children(),t=p(e).find('[data-tabs="items"]').children(),n=0,s=function(e){p(a[e]).on("click",function(){p(a[n]).removeClass("active"),p(t[n]).removeClass("active"),p(a[n=e]).addClass("active"),p(t[n]).addClass("active")})},i=0;i<a.length;i++)s(i);if(p(window).innerWidth()<=900){p(t).removeClass("active");for(var o=0;o<t.length;o++)p(t[o]).find(".main-detail__tabs-item_title").on("click",function(){p(this).parent().hasClass("active")?p(this).parent().removeClass("active").find(".main-detail__tabs-item_text").slideUp(300):(p(t).removeClass("active").find(".main-detail__tabs-item_text").slideUp(300),p(this).parent().addClass("active").find(".main-detail__tabs-item_text").slideDown(300))})}return this},p.fn.slidersimple=function(){var e=p(this),n=p(e).find('[data-toggle="-1"]'),s=p(e).find('[data-toggle="1"]'),i=p(e).find('[data-slider="body"]'),o=p(i).children(),a=p(e).find("[data-toggle]"),t=p(e).innerWidth(),r=p(o[0]).outerWidth(!0),l=Math.floor(t/r),d=l*r,c=Math.ceil(r*o.length/d);p(i).width(r*o.length);var f=0;p(i).css("transform","translate3d(0, 0, 0)"),p(a).on("click",function(){var e=p(this).data("toggle")*l;h(e,this)}),p(e).on("touchstart",function(e){u(e)});var h=function(e){(f+=e)<c&&p(s).addClass("active"),0<f&&p(n).addClass("active");var a=f*r,t=r*o.length-d;t<=a&&(a=t,p(s).removeClass("active")),a<d&&(a=0,p(n).removeClass("active")),p(i).css("transform","translate3d(-"+a+"px, 0, 0)")},u=function(e){var n=e.changedTouches[0].target,s=e.changedTouches[0].screenX;n.addEventListener("touchend",function e(a){var t=a.changedTouches[0].screenX;30<Math.abs(s-t)&&(s<t?h(-1):t<s&&h(1)),n.removeEventListener("touchend",e)})};return this},p.fn.sliderWPagination=function(){var e=p(this),a=p(e).find('[data-toggle="-1"]'),t=p(e).find('[data-toggle="1"]'),n=p(e).find('[data-slider="body"]'),s=p(n).children(),i=p(e).find("[data-toggle]"),o=p(s[0]).outerWidth(!0),r=s.length-1;p(n).width(o*s.length);var l=0;p(n).css("transform","translate3d(0, 0, 0)"),p(i).on("click",function(){var e=p(this).data("toggle");l+=e,u()});for(var d=p(e).find('[data-slider="pagination"]'),c=p(d).find(">div"),f=function(e){p(c[e]).on("click",function(){l=e,u()})},h=0;h<c.length;h++)f(h);function u(){l<r&&p(t).addClass("active"),0<l&&p(a).addClass("active"),l==r&&p(t).removeClass("active"),0==l&&p(a).removeClass("active"),p(n).css("transform","translate3d(-"+l*o+"px, 0, 0)"),p(c).removeClass("active"),p(c[l]).addClass("active")}return p(e).on("touchstart",function(e){!function(e){console.log("tut");var n=e.changedTouches[0].target,s=e.changedTouches[0].screenX;n.addEventListener("touchend",function e(a){var t=a.changedTouches[0].screenX;30<Math.abs(s-t)&&(s<t&&0<l?(l-=1,u()):t<s&&l<r&&(l+=1,u()));n.removeEventListener("touchend",e)})}(e)}),this}}(jQuery);